
# J 

## 题意

$n$堆石子，第$i$堆石子有$a_i$个。初始都未染色。让你将每堆石子染为黑色或白色。两人博弈。每次操作以下二选一。不能操作的输。

- 选黑色堆，在最小个数的石子堆里取若干个石子。

- 选白色堆，在任意一堆里取若干个。

问你先手必胜的染色方案数。

$n\;10^5,a_i\;10^{18}$。

## 做法

- 黑色堆考虑一堆直接赢，两堆的话如果最小堆大于$1$先手赢。三堆的话如果最小堆大于$1$那么仍然可以转为两堆最小堆大于$1$还是先手赢。所以不考虑个数为$1$的堆都是先手赢。个数为$1$的堆的作用只是先手转换。

- 白色堆就是nim博弈。

- 考虑黑白混合，如果黑色堆和白色堆其中一个是先手胜另一个是先手败，那么必胜。因为会转化为两个都是先手败的局面从而获胜。

- 黑色必胜态是奇数个$1$、偶数个$1$和若干个大于$1$。

- 白色必胜态是异或和非$0$。

- 考虑如何计数。考虑去除$1$的影响，枚举黑色堆的$1$的个数。然后使两者其中一个赢一个输即可。

- 好像完全不对，和题解完全不一样。