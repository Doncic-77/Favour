# J

## 题意

序列区间取max，区间询问取$[l,r]$的石子附带一个额外的石子$t$组成$r-l+2$堆石子做nim博弈，问先手赢的方案数。

## 题解

推一会。

- 设$r-l+2$堆石子的异或和是$z$。

- $z=0$则先手必败。

- 假设先手对$x$操作，那么剩下$r-l+1$堆的石子的异或和是$y$，满足$x\oplus y=z$，如果想把必败态留给后手，那么要把$x$改造成$y$，需要满足$x\ge y$，但由于$x=y$会导致$z=0$，那么$x>y$。

- 异或是不进位加法，$x>x\oplus y$当且仅当$y$的最高位在$x$内也是$1$。

- 掏出sgbt板子，支持区间取max，维护区间异或和、每位出现的次数。